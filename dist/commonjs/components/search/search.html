<template>
  <div class="search">
    <i click.delegate="iconClick()" class="wfm-search search-icon ${searchExpanded ? 'search-icon--active' : ''}"></i>
    <input ref="searchInput" type="text" class="search-input ${searchExpanded ? 'search-input--active' : ''}"
     placeholder="${placeholder}"
     value.bind="searchValue"
     return-trigger return.delegate="handleReturn()"
     escape-blur
     blur.trigger="handleBlur()"
     focus.trigger="handleFocus()"
     typing-trigger="300" typing.delegate="handleTyping()"/>

   <div class="horizontal-options-container ${searchExpanded ? 'horizontal-options-container--hidden' : ''}">
     <div click.delegate="handleTileClick($event)" repeat.for="option of horizontalDisplayed" class="search-tile ${option.value === selectedValue ? 'search-tile--selected' : ''}">
       ${ option.label }
     </div>
   </div>

   <ul tabindex="0" class="dropdown">
     <li click.delegate="handleDropdownClick()" class="search-tile ${searchExpanded ? 'search-tile--selected' : ''}">
       ${ !searchExpanded ? 'More' : displayedValue}
     </li>
     <div class="dropdown-menu ${expandDropdown ? 'dropdown-menu--active' : ''}">
       <li click.delegate="handleTileClick($event)" repeat.for="option of verticalDisplayed" class="search-tile ${option.value === selectedValue ? 'search-tile--selected' : ''}">
           ${option.label}
       </li>
     </div>
   </ul>
  </div>
</template>